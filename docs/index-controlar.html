<!DOCTYPE html>

<html>
<head>
  <title>index-controlar.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="Data.html">
                  Data.js
                </a>
              
                
                <a class="source" href="SerialHandler.html">
                  SerialHandler.js
                </a>
              
                
                <a class="source" href="index-controlar.html">
                  index-controlar.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>index-controlar.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*
 * Interface grafica
 *
 */</span>


<span class="hljs-comment">/*
 * Metodos de controle da GUI
 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>////////////////////////////////////////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">playbtn</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> ($(<span class="hljs-string">'#tempo'</span>).val() &gt;= <span class="hljs-number">1</span>) {
    $(<span class="hljs-string">'#play'</span>).addClass(<span class="hljs-string">'green'</span>).removeClass(<span class="hljs-string">'disabled'</span>);
  } <span class="hljs-keyword">else</span> {
    $(<span class="hljs-string">'#play'</span>).removeClass(<span class="hljs-string">'green'</span>).addClass(<span class="hljs-string">'disabled'</span>);
  }

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">medir</span>(<span class="hljs-params"></span>) </span>{
  $(<span class="hljs-string">'#stepduracao'</span>).addClass(<span class="hljs-string">'completed'</span>).removeClass(<span class="hljs-string">'active'</span>);
  $(<span class="hljs-string">'#stepexec'</span>).addClass(<span class="hljs-string">'active'</span>).removeClass(<span class="hljs-string">'disabled'</span>);
  $(<span class="hljs-string">'#tempoSelect'</span>).hide();
  $(<span class="hljs-string">'#execute'</span>).show();
  $(<span class="hljs-string">'#progress'</span>)
    .progress({
      total: $(<span class="hljs-string">'#tempo'</span>).val()
    });
  startReading($(<span class="hljs-string">'#tempo'</span>).val());
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startReading</span>(<span class="hljs-params">temp</span>) </span>{
  <span class="hljs-built_in">console</span>.log(temp);
  <span class="hljs-keyword">var</span> timer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">var</span> count = temp;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>count = count + 2;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (count &lt;= <span class="hljs-number">0</span>) {
      $(<span class="hljs-string">'#status'</span>).html(<span class="hljs-string">"Gerando relat√≥rio"</span>);
    } <span class="hljs-keyword">else</span> {
      $(<span class="hljs-string">'#status'</span>).html(<span class="hljs-string">"Medindo"</span>);
    }
    <span class="hljs-built_in">console</span>.log(count + <span class="hljs-string">" of "</span> + temp);
    $(<span class="hljs-string">'#progress'</span>).progress(<span class="hljs-string">'increment'</span>);
    clearInterval(timer);
    timer = <span class="hljs-literal">null</span>;
    count--;
    doStep();
  };

  <span class="hljs-keyword">var</span> doStep = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (count &gt;= <span class="hljs-number">-2</span>) {
      clearInterval(timer);
      timer = setTimeout(callback, <span class="hljs-number">1000</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"ACABOU!"</span>);
      genReport(temp);
    }
  };
  doStep();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">genReport</span>(<span class="hljs-params">temp</span>) </span>{
  $(<span class="hljs-string">'#stepduracao'</span>).addClass(<span class="hljs-string">'completed'</span>).removeClass(<span class="hljs-string">'active'</span>);
  $(<span class="hljs-string">'#stepexec'</span>).addClass(<span class="hljs-string">'completed'</span>).removeClass(<span class="hljs-string">'active'</span>);
  $(<span class="hljs-string">'#steprelatorio'</span>).addClass(<span class="hljs-string">'active'</span>).removeClass(<span class="hljs-string">'disabled'</span>);
  $(<span class="hljs-string">'#tempoSelect'</span>).hide();
  $(<span class="hljs-string">'#execute'</span>).hide();
  $(<span class="hljs-string">'#relatorio'</span>).show();

  estatograph(temp);
  estabilograph(temp);

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reset</span>(<span class="hljs-params"></span>) </span>{
  $(<span class="hljs-string">'#progress'</span>).progress(<span class="hljs-string">'reset'</span>);
  $(<span class="hljs-string">'#stepduracao'</span>).addClass(<span class="hljs-string">'active'</span>).removeClass(<span class="hljs-string">'completed'</span>);
  $(<span class="hljs-string">'#stepexec'</span>).addClass(<span class="hljs-string">'disabled'</span>).removeClass(<span class="hljs-string">'completed'</span>).removeClass(<span class="hljs-string">'active'</span>);
  $(<span class="hljs-string">'#steprelatorio'</span>).addClass(<span class="hljs-string">'disabled'</span>).removeClass(<span class="hljs-string">'completed'</span>).removeClass(<span class="hljs-string">'active'</span>);
  $(<span class="hljs-string">'#tempoSelect'</span>).show();
  $(<span class="hljs-string">'#execute'</span>).hide();
  $(<span class="hljs-string">'#relatorio'</span>).hide();
  $(<span class="hljs-string">'#graph1'</span>).html(<span class="hljs-string">""</span>);
  $(<span class="hljs-string">'#graph2'</span>).html(<span class="hljs-string">""</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">estatograph</span>(<span class="hljs-params">temp</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-comment">/*
          var data = [
              [5, 3],
              [10, 17],
              [15, 4],
              [2, 8]
          ];
          */</span>

  <span class="hljs-keyword">var</span> data = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c = <span class="hljs-number">0</span>; c &lt; temp * <span class="hljs-number">50</span>; c++) {
    <span class="hljs-keyword">var</span> x = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">100</span>;
    <span class="hljs-keyword">var</span> y = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">100</span>;
    data[c] = [x, y];
  }

  <span class="hljs-keyword">var</span> margin = {
      top: <span class="hljs-number">20</span>,
      right: <span class="hljs-number">15</span>,
      bottom: <span class="hljs-number">60</span>,
      left: <span class="hljs-number">60</span>
    },
    width = <span class="hljs-number">400</span> - margin.left - margin.right,
    height = <span class="hljs-number">400</span> - margin.top - margin.bottom;

  <span class="hljs-keyword">var</span> x = d3.scale.linear()
    .domain([d3.min(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> d[<span class="hljs-number">0</span>];
    }), d3.max(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> d[<span class="hljs-number">0</span>];
    })])
    .range([<span class="hljs-number">0</span>, width]);

  <span class="hljs-keyword">var</span> y = d3.scale.linear()
    .domain([d3.min(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>];
    }), d3.max(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>];
    })])
    .range([height, <span class="hljs-number">0</span>]);

  <span class="hljs-keyword">var</span> chart = d3.select(<span class="hljs-string">'#graph1'</span>)
    .append(<span class="hljs-string">'svg:svg'</span>)
    .attr(<span class="hljs-string">'width'</span>, width + margin.right + margin.left)
    .attr(<span class="hljs-string">'height'</span>, height + margin.top + margin.bottom)
    .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'chart'</span>)

  <span class="hljs-keyword">var</span> main = chart.append(<span class="hljs-string">'g'</span>)
    .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'translate('</span> + margin.left + <span class="hljs-string">','</span> + margin.top + <span class="hljs-string">')'</span>)
    .attr(<span class="hljs-string">'width'</span>, width)
    .attr(<span class="hljs-string">'height'</span>, height)
    .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'main'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>draw the x axis</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> xAxis = d3.svg.axis()
    .scale(x)
    .orient(<span class="hljs-string">'bottom'</span>);

  main.append(<span class="hljs-string">'g'</span>)
    .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'translate(0,'</span> + height + <span class="hljs-string">')'</span>)
    .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'main axis date'</span>)
    .call(xAxis);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>draw the y axis</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> yAxis = d3.svg.axis()
    .scale(y)
    .orient(<span class="hljs-string">'left'</span>);

  main.append(<span class="hljs-string">'g'</span>)
    .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'translate(0,0)'</span>)
    .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'main axis date'</span>)
    .call(yAxis);

  <span class="hljs-keyword">var</span> g = main.append(<span class="hljs-string">"svg:g"</span>);

  g.selectAll(<span class="hljs-string">"scatter-dots"</span>)
    .data(data)
    .enter().append(<span class="hljs-string">"svg:circle"</span>)
    .attr(<span class="hljs-string">"cx"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{
      <span class="hljs-keyword">return</span> x(d[<span class="hljs-number">0</span>]);
    })
    .attr(<span class="hljs-string">"cy"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> y(d[<span class="hljs-number">1</span>]);
    })
    .attr(<span class="hljs-string">"r"</span>, <span class="hljs-number">3</span>);

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">estabilograph</span>(<span class="hljs-params">temp</span>) </span>{



  <span class="hljs-keyword">var</span> data = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c = <span class="hljs-number">0</span>; c &lt; temp * <span class="hljs-number">10</span>; c++) {
    data[c] = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">10</span>;
  }
  <span class="hljs-keyword">var</span> w = <span class="hljs-number">500</span>,
    h = <span class="hljs-number">200</span>,
    margin = <span class="hljs-number">20</span>,
    y = d3.scale.linear().domain([<span class="hljs-number">0</span>, d3.max(data)]).range([<span class="hljs-number">0</span> + margin, h - margin]),
    x = d3.scale.linear().domain([<span class="hljs-number">0</span>, data.length]).range([<span class="hljs-number">0</span> + margin, w - margin])

  <span class="hljs-keyword">var</span> vis = d3.select(<span class="hljs-string">"#graph2"</span>)
    .append(<span class="hljs-string">"svg:svg"</span>)
    .attr(<span class="hljs-string">"width"</span>, w)
    .attr(<span class="hljs-string">"height"</span>, h)

  <span class="hljs-keyword">var</span> g = vis.append(<span class="hljs-string">"svg:g"</span>)
    .attr(<span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate(0, 200)"</span>);

  <span class="hljs-keyword">var</span> line = d3.svg.line()
    .x(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{
      <span class="hljs-keyword">return</span> x(i);
    })
    .y(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> * y(d);
    })

  g.append(<span class="hljs-string">"svg:path"</span>).attr(<span class="hljs-string">"d"</span>, line(data));

  g.append(<span class="hljs-string">"svg:line"</span>)
    .attr(<span class="hljs-string">"x1"</span>, x(<span class="hljs-number">0</span>))
    .attr(<span class="hljs-string">"y1"</span>, <span class="hljs-number">-1</span> * y(<span class="hljs-number">0</span>))
    .attr(<span class="hljs-string">"x2"</span>, x(w))
    .attr(<span class="hljs-string">"y2"</span>, <span class="hljs-number">-1</span> * y(<span class="hljs-number">0</span>))

  g.append(<span class="hljs-string">"svg:line"</span>)
    .attr(<span class="hljs-string">"x1"</span>, x(<span class="hljs-number">0</span>))
    .attr(<span class="hljs-string">"y1"</span>, <span class="hljs-number">-1</span> * y(<span class="hljs-number">0</span>))
    .attr(<span class="hljs-string">"x2"</span>, x(<span class="hljs-number">0</span>))
    .attr(<span class="hljs-string">"y2"</span>, <span class="hljs-number">-1</span> * y(d3.max(data)))

  g.selectAll(<span class="hljs-string">".xLabel"</span>)
    .data(x.ticks(<span class="hljs-number">5</span>))
    .enter().append(<span class="hljs-string">"svg:text"</span>)
    .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"xLabel"</span>)
    .text(<span class="hljs-built_in">String</span>)
    .attr(<span class="hljs-string">"x"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> x(d)
    })
    .attr(<span class="hljs-string">"y"</span>, <span class="hljs-number">0</span>)
    .attr(<span class="hljs-string">"text-anchor"</span>, <span class="hljs-string">"middle"</span>)

  g.selectAll(<span class="hljs-string">".yLabel"</span>)
    .data(y.ticks(<span class="hljs-number">4</span>))
    .enter().append(<span class="hljs-string">"svg:text"</span>)
    .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"yLabel"</span>)
    .text(<span class="hljs-built_in">String</span>)
    .attr(<span class="hljs-string">"x"</span>, <span class="hljs-number">0</span>)
    .attr(<span class="hljs-string">"y"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> * y(d)
    })
    .attr(<span class="hljs-string">"text-anchor"</span>, <span class="hljs-string">"right"</span>)
    .attr(<span class="hljs-string">"dy"</span>, <span class="hljs-number">4</span>)

  g.selectAll(<span class="hljs-string">".xTicks"</span>)
    .data(x.ticks(<span class="hljs-number">5</span>))
    .enter().append(<span class="hljs-string">"svg:line"</span>)
    .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"xTicks"</span>)
    .attr(<span class="hljs-string">"x1"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> x(d);
    })
    .attr(<span class="hljs-string">"y1"</span>, <span class="hljs-number">-1</span> * y(<span class="hljs-number">0</span>))
    .attr(<span class="hljs-string">"x2"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> x(d);
    })
    .attr(<span class="hljs-string">"y2"</span>, <span class="hljs-number">-1</span> * y(<span class="hljs-number">-0.3</span>))

  g.selectAll(<span class="hljs-string">".yTicks"</span>)
    .data(y.ticks(<span class="hljs-number">4</span>))
    .enter().append(<span class="hljs-string">"svg:line"</span>)
    .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"yTicks"</span>)
    .attr(<span class="hljs-string">"y1"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> * y(d);
    })
    .attr(<span class="hljs-string">"x1"</span>, x(<span class="hljs-number">-0.3</span>))
    .attr(<span class="hljs-string">"y2"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> * y(d);
    })
    .attr(<span class="hljs-string">"x2"</span>, x(<span class="hljs-number">0</span>))


}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
